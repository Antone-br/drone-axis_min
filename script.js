window.Webflow=window.Webflow||[],window.Webflow.push(function(){document.querySelectorAll('[data-faq-dropdown=""]').forEach(t=>{t.addEventListener("click",function(){let t=this.querySelector('[data-faq-dropdown="answer"]'),e=this.querySelector('[data-faq-dropdown="arrow"]');t&&(t.style.height&&"0px"!==t.style.height?(t.style.height="0px",e&&(e.style.transform="rotate(0deg)")):(t.style.height=t.scrollHeight+"px",e&&(e.style.transform="rotate(180deg)")))})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.getElementById("date-picker");t&&(t.setAttribute("autocomplete","off"),t.setAttribute("readonly","readonly"),t.value=""),flatpickr("#date-picker",{enableTime:!0,time_24hr:!0,locale:"fr",minDate:"today",disableMobile:!0,altInput:!0,altFormat:"d/m/Y - H\\hi",dateFormat:"Y-m-d H:i",allowInput:!1,clickOpens:!0})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){(t=document.createElement("style")).textContent="  #contact-popup{position:fixed;top:16px;left:16px;display:none;align-items:flex-start;justify-content:flex-start;z-index:9999;background:transparent;}  #contact-popup-inner{background:#ffffff;padding:12px 16px;border-radius:8px;max-width:320px;width:auto;box-shadow:0 0 0 2px rgba(0, 128, 0, 0.1);border:1px solid #008000;font-family:inherit;text-align:left;}  #contact-popup-title{font-size:14px;font-weight:600;margin-bottom:4px;color:#008000;}  #contact-popup-text{font-size:12px;color:#155724;margin-bottom:8px;}  #contact-popup-track{width:100%;height:3px;border-radius:999px;background:#e6f4ea;overflow:hidden;margin-top:2px;}  #contact-popup-bar{width:0%;height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);transition:width 2s ease;}  @media (prefers-reduced-motion: reduce){#contact-popup-bar{transition:width 0.01s linear!important;}}",document.head.appendChild(t),(e=document.createElement("div")).id="contact-popup",e.innerHTML='    <div id="contact-popup-inner">      <div id="contact-popup-title">Informations envoy\xe9es</div>      <div id="contact-popup-text">Tes informations ont bien \xe9t\xe9 envoy\xe9es.</div>      <div id="contact-popup-track">        <div id="contact-popup-bar"></div>      </div>    </div>',document.body.appendChild(e);var t,e,r="1px solid #ff0000",a="0 0 0 2px rgba(255, 0, 0, 0.1)",o=/^7 [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$/,n=$("#form-contact");if(n.length){var i=n.find("form").length?n.find("form").eq(0):n,l=!1;n.attr("novalidate","novalidate"),n.find('[data-contact-field="error"]').hide(),n.find('[data-contact-field="validate"]').hide(),n.on("click",function(t){$(t.target).closest('input[type="submit"], button[type="submit"]').length||n.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"], [data-contact-field="radio-wrapper"]').each(function(){var t=this;$(this).is('[data-contact-field="date"]')&&(t=c(this)),d(t)})}),n.on("click touchstart",".form-contact_radio-wrapper",function(t){var e=$(this).find('input[type="radio"][data-contact-field="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}),n.on("change",'input[type="radio"][data-contact-field="radio"]',function(){var t=this.name;n.find('input[type="radio"][data-contact-field="radio"][name="'+t+'"]').each(function(){var t=$(this).closest('[data-contact-field="radio-wrapper"]')[0]||this;this.checked?(d(t),s(this,"error").hide(),s(this,"validate").show()):(t.style.setProperty("border","","important"),t.style.setProperty("box-shadow","","important"),t.style.borderRadius="",s(this,"validate").hide())})}),n.on("focusin",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',function(){var t=this;$(t).is('[data-contact-field="date"]')&&(t=c(t)),d(t),function t(e){e.style.setProperty("box-shadow","0 0 0 2px rgba(0, 128, 0, 0.1)","important")}(t)}),n.on("focusout",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',function(){var t=this;$(t).is('[data-contact-field="date"]')&&(t=c(t)),u(t)}),n.on("input",'[data-contact-field="postal"]',function(t){var e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?p(this):f(this)}),n.on("input",'[data-contact-field="phone"]',function(t){var e=t.target.value.replace(/\D/g,"").substring(0,9);e.length>0&&"7"!==e[0]&&(e="7"+e.substring(1));var r="";e.length>0&&(r+=e.substring(0,1)),e.length>1&&(r+=" "+e.substring(1,3)),e.length>3&&(r+=" "+e.substring(3,5)),e.length>5&&(r+=" "+e.substring(5,7)),e.length>7&&(r+=" "+e.substring(7,9)),t.target.value=r,o.test(r)?p(this):f(this)}),n.on("input change",'[data-contact-field="date"]',function(){""!==this.value.trim()?p(this):f(this)}),n.on("input",'[data-contact-field="text"]:not([data-contact-field="phone"]):not([data-contact-field="postal"]):not([data-contact-field="date"])',function(){this.value.trim().length>1?p(this):f(this)}),n.on("click",'input[type="submit"], button[type="submit"]',function(t){t.preventDefault(),t.stopPropagation(),function t(){if(e=0,e+=(u=0,n.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]').each(function(){var t,e=!0,n=this.value.trim();(n||(e=!1),e&&$(this).is('[data-contact-field="postal"]')&&5!==n.length&&(e=!1),e&&$(this).is('[data-contact-field="phone"]')&&!o.test(n)&&(e=!1),e)?p(this):(t=this,$(t).is('[data-contact-field="date"]')&&(t=c(t)),f(t),t.style.setProperty("border",r,"important"),t.style.setProperty("box-shadow",a,"important"),t.style.borderRadius="",s(t,"error").show(),u++)}),u),(e+=function t(){var e=0,r=n.find('input[type="radio"][data-contact-field="radio"]:visible'),a={};for(var o in r.each(function(){var t=this.name;a[t]||(a[t]=[]),a[t].push(this)}),a){var i=a[o];i.some(function(t){return t.checked})?i.forEach(function(t){d($(t).closest('[data-contact-field="radio-wrapper"]')[0]||t)}):(i.forEach(function(t){h($(t).closest('[data-contact-field="radio-wrapper"]')[0]||t)}),e++)}return e}())>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");var e,u,y=i[0],b=new FormData(y);console.log("\uD83D\uDCE4 POST contact vers n8n"),fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:b}).then(function(t){if(console.log("✅ R\xe9ponse n8n (contact) status:",t.status),t.ok){l=!0,window.unlockScrollContact&&window.unlockScrollContact(),document.body.style.setProperty("overflow","visible","important"),document.querySelectorAll(".form-contact_form").forEach(function(t){t.style.setProperty("display","block","important")}),document.querySelectorAll(".form-contact_success").forEach(function(t){t.style.setProperty("display","none","important")}),document.querySelectorAll(".form-contact_error").forEach(function(t){t.style.setProperty("display","none","important")}),document.querySelectorAll('[data-form-contact="page"]').forEach(function(t){t.style.setProperty("display","none","important")});var e,r,a=i[0];a&&"function"==typeof a.reset&&a.reset(),n.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"], [data-contact-field="radio-wrapper"]').each(function(){var t=this;$(t).is('[data-contact-field="date"]')&&(t=c(t)),t.style.setProperty("border","","important"),t.style.setProperty("box-shadow","","important"),t.style.borderRadius="",s(t,"error").hide(),s(t,"validate").hide()}),e=document.getElementById("contact-popup"),r=document.getElementById("contact-popup-bar"),e&&r&&(r.style.width="0%",e.style.display="flex",requestAnimationFrame(function(){requestAnimationFrame(function(){r.style.width="100%"})}),setTimeout(function(){e.style.display="none",r.style.width="0%"},2200))}else $(".form-contact_error").css("display","block"),$(".form-contact_success").hide()}).catch(function(t){console.error("❌ Erreur n8n (contact):",t),$(".form-contact_error").css("display","block"),$(".form-contact_success").hide()})}()}),$(document).on("click",'[data-form-contact="open"]',function(){l&&($(".form-contact_success").hide(),$(".form-contact_error").hide(),$(".form-contact_form").css("display","block"))})}function s(t,e){var r=$(t),a=r.closest('.price_form-input-wrapper, .price_form-input-wrap, [data-contact-field="radio-wrapper"]');if(a.length>0)return a.find('[data-contact-field="'+e+'"]');var o=r.siblings('[data-contact-field="'+e+'"]');return o.length?o:r.parent().find('[data-contact-field="'+e+'"]')}function c(t){var e=$(t).closest(".price_form-input-wrap");return e.length&&e.find('input[type="text"].is-date').get(0)||t}function d(t){var e=window.getComputedStyle(t).borderColor;("rgb(255, 0, 0)"===e||"#ff0000"===e)&&(t.style.setProperty("border","","important"),t.style.setProperty("box-shadow","","important"),t.style.borderRadius="",s(t,"error").hide())}function u(t){t.style.setProperty("box-shadow","","important")}function p(t){$(t).is('[data-contact-field="date"]')&&(t=c(t)),d(t),function t(e){e.style.setProperty("border","1px solid #008000","important")}(t),t.style.borderRadius="",s(t,"validate").show()}function f(t){$(t).is('[data-contact-field="date"]')&&(t=c(t)),t.style.setProperty("border","","important"),u(t),s(t,"validate").hide()}function h(t){f(t),t.style.setProperty("border",r,"important"),t.style.setProperty("box-shadow",a,"important"),s(t,"error").show()}}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(function t(){let e=document.querySelector("#form-contact-phone");if(!e){console.error("Input #telephone introuvable !");return}if(window.intlTelInput){let r=window.intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"auto",preferredCountries:["fr","be","ch"],fixDropdownWidth:!0,geoIpLookup(t){fetch("https://ipapi.co/json").then(t=>t.json()).then(e=>t(e.country_code)).catch(()=>t("fr"))}}),a=e.closest("form");a.addEventListener("submit",function(){let t="";t=window.intlTelInputUtils?r.getNumber(window.intlTelInputUtils.numberFormat.INTERNATIONAL):r.getNumber(),e.style.color="transparent",e.value=t})}else console.error("La librairie intlTelInput n'est pas encore charg\xe9e.")},500)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector(".faq_tabs.w-tabs");if(!t)return;let e=t.querySelector(".w-tab-menu"),r=t.querySelector(".w-tab-content");if(!e||!r)return;let a=e.querySelectorAll(".w-tab-link, .faq_tab-link"),o=r.querySelectorAll(".w-tab-pane"),n=r.querySelectorAll(".faq_tab-pane .faq_tabs-menu-wrapper[data-tabs]");if(!a.length||!o.length||!n.length)return;function i(t){a.forEach(t=>{t.classList.remove("w--current"),t.setAttribute("aria-selected","false"),t.removeAttribute("tabindex")}),o.forEach(t=>{t.classList.remove("w--tab-active"),t.setAttribute("hidden","true")}),n.forEach(t=>{t.querySelectorAll(".faq_tab-link").forEach(t=>{t.classList.remove("w--current")})});let e=a[t],r=o[t];e&&(e.classList.add("w--current"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0")),r&&(r.classList.add("w--tab-active"),r.removeAttribute("hidden"));let i=r?r.querySelector(".faq_tabs-menu-wrapper[data-tabs]"):null;if(i){let l=i.querySelectorAll(".faq_tab-link");l[t]&&l[t].classList.add("w--current")}}let l=0;a.forEach((t,e)=>{(t.classList.contains("w--current")||"true"===t.getAttribute("aria-selected"))&&(l=e)}),i(l),a.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),i(e)})}),n.forEach(t=>{let e=t.querySelectorAll(".faq_tab-link");e.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),i(e)})})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector('[data-form-contact="page"]'),e=document.querySelectorAll('[data-form-contact="open"]'),r=document.querySelectorAll('[data-form-contact="close"]'),a=document.querySelectorAll('[data-form-contact="page"] [data-btn]'),o=document.body;if(!t||!e.length)return;t.style.transition="opacity 400ms ease",t.style.opacity="0",t.style.display="none";let n=!1,i=t=>{n&&t.preventDefault()},l=t=>{if(!n)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()},s=()=>{n=!0,o.addEventListener("wheel",i,{passive:!1}),o.addEventListener("touchmove",i,{passive:!1}),window.addEventListener("keydown",l,{passive:!1})},c=()=>{n=!1,o.removeEventListener("wheel",i),o.removeEventListener("touchmove",i),window.removeEventListener("keydown",l),o.style.removeProperty("overflow")};window.unlockScrollContact=c;let d=()=>{s(),t.style.display="block",requestAnimationFrame(()=>{t.style.opacity="1"})},u=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none",c()},400)};document.addEventListener("click",e=>{if("block"!==t.style.display||e.target.classList&&e.target.classList.contains("price_form-input")&&e.target.classList.contains("w-input"))return;let r=null!==e.target.closest('[data-form-contact="page"]');r||u()}),e.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),d()})}),r.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),u()})}),a.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),u()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){gsap.registerPlugin(ScrollTrigger,SplitText),gsap.context(()=>{document.querySelectorAll('[data-heading=""]').forEach(t=>{if("true"===t.dataset.splitInit)return;t.dataset.splitInit="true";let e=t.querySelectorAll(".main-span");if(!t.textContent.trim())return;e.forEach(t=>{let e=t.previousSibling;e&&3===e.nodeType&&/\s$/.test(e.textContent)||t.insertAdjacentText("beforebegin"," ")});let r=t.querySelector("[data-split-word]"),a,o;if(!(o=r?Array.from(t.querySelectorAll('[data-split-word="true"]')):(a=new SplitText(t,{type:"words",wordsClass:"split-word-wrapper",elementClass:!1,ignore:".main-span",position:"relative"})).words.map(t=>{let e=window.getComputedStyle(t.parentNode);return t.dataset.splitWord="true",t.style.display="inline-block",t.style.lineHeight=e.lineHeight,t.style.textDecoration=e.textDecoration,t.style.fontSize=e.fontSize,t.style.fontWeight=e.fontWeight,t.style.color=e.color,t})).length)return;gsap.set(o,{filter:"blur(20px)",y:40,opacity:0,willChange:"filter, y, opacity"}),e.forEach(t=>{gsap.set(t,{filter:"blur(20px)",y:40,opacity:0,"--bgY":"100%"})});let n=new IntersectionObserver(r=>{r.forEach(r=>{if(r.isIntersecting){let a=gsap.timeline();a.to(o,{filter:"blur(0px)",y:0,opacity:1,duration:.9,stagger:.04,ease:"power3.out"}),e.forEach((t,e)=>{a.to(t,{filter:"blur(0px)",y:0,opacity:1,"--bgY":"0%",duration:.6,ease:"power3.out"},"-=0.8")}),n.unobserve(t)}})},{threshold:.3,rootMargin:"0px 0px -10% 0px"});n.observe(t)})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){var t=document.querySelector('[data-navbar=""]'),e=document.querySelector('[data-hero=""]'),r=document.querySelector('[data-navbar-menu-btn=""]'),a=document.querySelector(".navbar_menu-button-inner"),o=t?t.querySelectorAll('[data-link-line="line"]'):[],n=r?r.getAttribute("aria-controls"):null,i=n?document.getElementById(n):null,l=!1;if(!t||!r)return;var s=t.hasAttribute("data-navbar-legal");let c=!1,d=t=>{c&&t.preventDefault()},u=t=>{if(!c)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()};function p(t){o.forEach(function(e){e.style.backgroundColor=t})}function f(t){t?document.body.style.overflowX="hidden":document.body.style.overflowX=""}function h(){s&&(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="var(--_variables-collection---text-color--text-primary)",p("#0a0a0a"))}function y(){if(s){h();return}if(!l){var r=window.scrollY,a=window.innerWidth<768;if(!e){r>0?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=a?"black":"var(--_variables-collection---text-color--text-primary)",p("#0a0a0a")):b();return}var o,n=r,i=t.getBoundingClientRect(),c=e.getBoundingClientRect();i.bottom+n>c.bottom+n?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=a?"black":"var(--_variables-collection---text-color--text-primary)",p("#0a0a0a")):r>0?(t.style.backgroundColor="rgba(0, 0, 0, 0.25)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="",p("")):b()}}function b(){if(s){h();return}t.style.backgroundColor="transparent",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="",p("")}function g(){l=!0,t.style.backgroundColor="#F2F2F2",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="black",a&&(a.style.color="black"),p("#0a0a0a"),f(!0),c=!0,window.addEventListener("wheel",d,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("keydown",u,{passive:!1})}function m(){l=!1,a&&(a.style.color=""),f(!1),c=!1,window.removeEventListener("wheel",d),window.removeEventListener("touchmove",d),window.removeEventListener("keydown",u),s?h():y()}if(r&&i){var v=new MutationObserver(function(){r.classList.contains("w--open")?g():m()}),w=new MutationObserver(function(t){t.forEach(function(t){"style"===t.attributeName&&"none"===i.style.display&&m()})});v.observe(r,{attributes:!0,attributeFilter:["class"]}),w.observe(i,{attributes:!0,attributeFilter:["style"]}),r.classList.contains("w--open")?g():s&&h()}window.addEventListener("scroll",y),window.addEventListener("resize",y),y()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t={"slider-1":{pricePerM2First100:8.9,pricePerM2After100:6.9,minValue:0},"slider-2":{pricePerM2:6.9,minValue:0},"slider-3":{pricePerM2:9.9,minValue:0},"slider-4":{pricePerM2:4.9,minValue:100}};function e(e,r){let a=t[e];if(!a||!a.pricePerM2||0===r)return 0;let o=Math.max(a.minValue,r);return o*a.pricePerM2}function r(){let e=document.querySelector('input[data-range="slider-1"]'),r=parseFloat(e.value)||0;o("value_toiture",r);let i=document.querySelector('input[data-radio="slops"]:checked');if(i){let l="";switch(i.value){case"pente_faible":l="Faible";break;case"pente_moyenne":l="Moyenne";break;case"pente_forte":l="Forte"}document.querySelectorAll('[data-radio="text"]').forEach(t=>{t.textContent=l})}let s=function t(){let e=document.querySelector('input[data-radio="slops"]:checked');if(!e)return 1;switch(e.value){case"pente_faible":return 1.155;case"pente_moyenne":return 1.414;case"pente_forte":return 2;default:return 1}}(),c=r*s,d=c.toFixed(1).replace(".",",");document.querySelectorAll('[data-radio="slops-text"]').forEach(t=>{t.textContent=d});let u=function e(r){let a=t["slider-1"];if(r<=100)return r*a.pricePerM2First100;{let o=100*a.pricePerM2First100,n=(r-100)*a.pricePerM2After100;return o+n}}(c),p=e.closest('[data-range="wrapper"]');if(p){let f=p.querySelector('[data-range="price"]');f&&(f.textContent=a(u))}o("value_toiture_result",a(u));let h=0,y=0,b=0,g=document.querySelector('input[data-range="slider-2"]');if(g){let m=parseFloat(g.value)||0;h=m*t["slider-2"].pricePerM2,o("value_facades_demoussage",m),o("value_surface_demoussage",a(h)),n(g,h)}let v=document.querySelector('input[data-range="slider-3"]');if(v){let w=parseFloat(v.value)||0;y=w*t["slider-3"].pricePerM2,o("value_facades_hydrofuge",w),o("value_surface_protection_hydrofuge",a(y)),n(v,y)}let _=document.querySelector('input[data-range="slider-4"]');if(_){let x=parseFloat(_.value)||0;x>0&&x<100&&(x=100),b=x*t["slider-4"].pricePerM2,o("value_gouttieres",x),o("value_gouttieres_result",a(b)),n(_,b)}let k=h+y;o("value_facades_result",a(k));let S=u+h+y+b;document.querySelectorAll('[data-range="sum"]').forEach(t=>{t.textContent=a(S)})}function a(t){return t.toFixed(2).replace(".",",")+"€"}function o(t,e){document.querySelectorAll(`[data-range="${t}"]`).forEach(t=>{"INPUT"===t.tagName?t.value=e:t.textContent=e})}function n(t,e){let r=t.closest('[data-range="wrapper"]');if(r){let o=r.querySelector('[data-range="price"]');o&&(o.textContent=a(e))}}let i=document.querySelectorAll('input[type="range"]');i.forEach(t=>{t.addEventListener("input",r),t.addEventListener("change",r)});let l=document.querySelectorAll('input[data-radio="slops"]');l.forEach(t=>{t.addEventListener("change",r)}),r()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){var t="1px solid #ff0000",e="0 0 0 2px rgba(255, 0, 0, 0.1)",r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=/^7 [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$/,o=$('[data-form-steps="1"]'),n=$('[data-form-steps="2"]'),i=$("form"),l=$("[data-form-content]"),s=l.closest(".w-form");i.attr("novalidate","novalidate"),o.css("display","grid"),n.hide(),$('[data-field="error"]').hide(),$('[data-field="validate"]').hide();var c=!1;function d(){var t=$('input[name="prix_ttc"][data-range="sum"]');if(0!==t.length){var e=0;["prix_surface_nettoyage_toiture","prix_surface_demoussage","prix_surface_protection_hydrofuge","prix_voulume_nettoyage_gouttieres"].forEach(function(t){var r=$('input[name="'+t+'"]');r.length>0&&(e+=parseFloat(r.val().trim().replace(/[€\s]/g,"").replace(",","."))||0)});var r=e.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})+"€";t.val(r).attr("value",r),console.log("\uD83D\uDCB0 Prix TTC mis \xe0 jour:",r)}}function u(t,e){var r=$(t).closest(".price_form-input-wrapper");if(r.length>0)return r.find('[data-field="'+e+'"]');var a=$(t).siblings('[data-field="'+e+'"]');return a.length?a:$(t).parent().find('[data-field="'+e+'"]')}function p(t){("rgb(255, 0, 0)"===t.style.borderColor||"#ff0000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow="",u(t,"error").hide())}function f(t,e=!1){p(t),t.style.border="1px solid #008000",e?t.style.boxShadow="0 0 0 2px rgba(0, 128, 0, 0.1)":t.style.boxShadow="",u(t,"validate").show()}function h(r,a=!1){p(r),r.style.border=t,a?r.style.boxShadow=e:r.style.boxShadow="",u(r,"error").show()}function y(t){("rgb(0, 128, 0)"===t.style.borderColor||"#008000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow=""),u(t,"validate").hide()}$(document).on("click touchstart","[data-radio]",function(t){var e=$(this).find('input[type="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}),$(document).on("change",'input[type="radio"]',function(){var t=this.name;$("[data-radio]").filter(function(){var e=$(this).find('input[type="radio"]')[0];return e&&e.name===t}).each(function(){var t=$(this).find('input[type="radio"]')[0];t&&(t.checked?(p(this),f(this,!1)):(("rgb(0, 128, 0)"===this.style.borderColor||"#008000"===this.style.borderColor)&&(this.style.border="",this.style.boxShadow=""),u(this,"validate").hide()))}),d()}),$(document).on("focusin",'[data-field="input"]:not([data-range="sum"])',function(){var t=this.value.trim(),e=!0;t?$(this).is("[data-postal]")&&5!==t.length?e=!1:$(this).is("[data-phone]")&&!a.test(t)?e=!1:$(this).is("[data-mail]")&&!r.test(t)?e=!1:t.length<=1&&(e=!1):e=!1,e&&f(this,!0)}),$(document).on("focusout",'[data-field="input"]',function(){"rgb(0, 128, 0)"===this.style.borderColor||"#008000"===this.style.borderColor?this.style.boxShadow="":("rgb(255, 0, 0)"===this.style.borderColor||"#ff0000"===this.style.borderColor)&&(this.style.boxShadow="")}),$(document).on("input","[data-postal]",function(t){var e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?f(this,!1):y(this)}),$(document).on("input","[data-phone]",function(t){var e=t.target.value.replace(/\D/g,"").substring(0,9);e.length>0&&"7"!==e[0]&&(e="7"+e.substring(1));var r="";e.length>0&&(r+=e.substring(0,1)),e.length>1&&(r+=" "+e.substring(1,3)),e.length>3&&(r+=" "+e.substring(3,5)),e.length>5&&(r+=" "+e.substring(5,7)),e.length>7&&(r+=" "+e.substring(7,9)),t.target.value=r,a.test(r)?f(this,!1):y(this)}),$(document).on("input","[data-mail]",function(t){r.test(t.target.value)?f(this,!1):y(this)}),$(document).on("input change",'input[name^="prix_"]:not([name="prix_ttc"])',function(){d()}),$(document).on("input",'[data-field="input"]:not([data-postal]):not([data-phone]):not([data-mail]):not([data-range="sum"])',function(){this.value.trim().length>1?f(this,!1):y(this)}),$(document).on("click",function(t){$(t.target).closest('[data-btn="form"], input[type="submit"], button[type="submit"]').length||($('[data-field="input"]').each(function(){p(this)}),$("[data-radio]").each(function(){p(this)}))}),$('[data-btn="form"]').click(function(i){i.preventDefault(),i.stopPropagation(),o.is(":visible")&&0===function o(){var n=0;$('[data-field="input"]:visible:not([data-range="sum"])').each(function(){var t=!0,e=this.value.trim();e||(t=!1),t&&$(this).is("[data-postal]")&&5!==e.length&&(t=!1),t&&$(this).is("[data-phone]")&&!a.test(e)&&(t=!1),t&&($(this).is("[data-mail]")||"email"===this.type)&&!r.test(e)&&(t=!1),t?(p(this),f(this,!1)):(y(this),h(this,!1),n++)});var i=$("[data-radio]:visible"),l={};for(var s in i.each(function(){var t=$(this).find('input[type="radio"]')[0];t&&(l[t.name]||(l[t.name]=[]),l[t.name].push(this))}),l){var c=$('input[name="'+s+'"]:checked').length>0,d=l[s];c?d.forEach(function(t){p(t)}):(d.forEach(function(r){r.style.border=t,r.style.boxShadow=e,u(r,"error").show()}),n++)}return n}()&&o.animate({opacity:0},300,function(){$(this).hide(),n.css({display:"grid",opacity:"0"}),n.animate({opacity:1},300),767>$(window).width()&&$("html, body").animate({scrollTop:$("#etape-2").offset().top},500)})}),$('[data-form="return"]').click(function(t){t.preventDefault(),t.stopPropagation(),n.animate({opacity:0},300,function(){$(this).hide(),o.css({display:"grid",opacity:"0"}),o.animate({opacity:1},300)})}),s.on("click",'input[type="submit"], button[type="submit"]',function(o){o.preventDefault(),o.stopPropagation(),function o(){if(d(),function o(){var n=0;$('[data-field="input"]:visible',l).each(function(){var t=!0,e=this.value.trim();e||(t=!1),t&&$(this).is("[data-postal]")&&5!==e.length&&(t=!1),t&&$(this).is("[data-phone]")&&!a.test(e)&&(t=!1),t&&($(this).is("[data-mail]")||"email"===this.type)&&!r.test(e)&&(t=!1),$(this).is('[data-range="sum"]')&&(t=!0),t?(p(this),f(this,!1)):(y(this),h(this,!1),n++)});var i=$("[data-radio]:visible",l),s={};for(var c in i.each(function(){var t=$(this).find('input[type="radio"]')[0];t&&(s[t.name]||(s[t.name]=[]),s[t.name].push(this))}),s){var d=$('input[name="'+c+'"]:checked',l).length>0,b=s[c];d?b.forEach(function(t){p(t)}):(b.forEach(function(r){r.style.border=t,r.style.boxShadow=e,u(r,"error").show()}),n++)}return n}()>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");var n=l[0],i=new FormData(n);console.log("\uD83D\uDCE4 POST contact vers n8n"),fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:i}).then(function(t){console.log("✅ R\xe9ponse n8n (contact) status:",t.status),t.ok?(c=!0,l.hide(),$("[data-form-success]").css("display","block"),$("[data-form-error]").hide()):($("[data-form-error]").css("display","block"),$("[data-form-success]").hide())}).catch(function(t){console.error("❌ Erreur n8n (contact):",t),$("[data-form-error]").css("display","block"),$("[data-form-success]").hide()})}()}),d()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(function t(){let e=document.querySelector("#telephone");if(!e){console.error("Input #telephone introuvable !");return}if(window.intlTelInput){let r=window.intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"auto",preferredCountries:["fr","be","ch"],fixDropdownWidth:!0,geoIpLookup(t){fetch("https://ipapi.co/json").then(t=>t.json()).then(e=>t(e.country_code)).catch(()=>t("fr"))}}),a=e.closest("form");a.addEventListener("submit",function(){let t="";t=window.intlTelInputUtils?r.getNumber(window.intlTelInputUtils.numberFormat.INTERNATIONAL):r.getNumber(),e.style.color="transparent",e.value=t})}else console.error("La librairie intlTelInput n'est pas encore charg\xe9e.")},500)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll(".price_range-wrapper");t.forEach((t,e)=>{let r=t.querySelector('input[type="range"]'),a=t.querySelector('[data-range="text"]');function o(){let t=parseFloat(r.value),e=parseFloat(r.min||0),o=parseFloat(r.max||100),n=(t-e)/(o-e)*100;r.style.background=`linear-gradient(to right, #192BC2 ${n}%, #DFDFDF ${n}%)`,a&&(a.style.left=`calc(${n}% + ${10-.2*n}px)`)}r&&(r.addEventListener("input",o),window.addEventListener("resize",o),o())})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector("form");if(!t)return;let e=t.querySelector('input[name="action"]');e||((e=document.createElement("input")).type="hidden",e.name="action",t.appendChild(e));let r=t.querySelectorAll('input[type="submit"][data-action]');r.forEach(t=>{t.addEventListener("click",function(){e.value=this.dataset.action||"",console.log("\uD83D\uDDB1️ CLICK submit (actions.js) → action =",e.value)})});let a=document.querySelectorAll(".price_btn-wrapper");a.forEach(t=>{let e=t.querySelector("a.btn_component.is-form"),r=t.querySelector('input[type="submit"][data-action]');e&&r&&e.addEventListener("click",function(t){t.preventDefault(),console.log("\uD83D\uDDB1️ CLICK fakeBtn → click sur realSubmit",r),r.click()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll('[data-toggle="checkbox"]'),e=document.querySelector('[span][data-toggle="text"], [data-toggle="text"]');t.forEach(t=>{let r=t.closest(".price_checkbox-wrapper");if(!r)return;r.style.webkitTapHighlightColor="transparent";let a=r.querySelector('[data-toggle="circle"]'),o=r.querySelector('[data-toggle="background"]');function n(){let r=t.checked;e&&(e.textContent=r?"OUI":"NON"),r?(a.style.transform="translate(100%, -50%)",a.style.backgroundColor="#FFFFFF",o.style.backgroundColor="#192BC2"):(a.style.transform="translate(0%, -50%)",a.style.backgroundColor="#192BC2",o.style.backgroundColor="#FFFFFF")}a&&o&&(a.style.transition="transform 0.35s ease, background-color 0.35s ease",o.style.transition="background-color 0.35s ease",n(),t.addEventListener("change",n))})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(()=>{let t=document.querySelectorAll(".price_form-text-wrapper"),e=[];t.forEach(t=>{if(!t.hasAttribute("data-radio")){let r=t.querySelector('input[type="radio"]');r&&e.push(r)}}),e.forEach(t=>{t.addEventListener("change",function(){if(this.checked){let t=this.name,e=document.querySelectorAll(`input[name="${t}"]`);e.forEach(t=>{let e=t.closest(".price_form-text-wrapper");if(e&&!e.hasAttribute("data-radio")){e.style.backgroundColor="#ffffff",e.style.borderColor="transparent",e.style.color="#333333";let r=e.querySelectorAll("*");r.forEach(t=>t.style.color="")}});let r=this.closest(".price_form-text-wrapper");if(r){r.style.backgroundColor="rgba(25, 43, 194, 0.1)",r.style.borderColor="#192BC2",r.style.color="#192BC2";let a=r.querySelectorAll("*");a.forEach(t=>{t.style.color="#192BC2"})}}})})},100)});