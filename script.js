window.Webflow=window.Webflow||[],window.Webflow.push(function(){document.querySelectorAll('[data-faq-dropdown=""]').forEach(t=>{t.addEventListener("click",function(){let t=this.querySelector('[data-faq-dropdown="answer"]'),e=this.querySelector('[data-faq-dropdown="arrow"]');t&&(t.style.height&&"0px"!==t.style.height?(t.style.height="0px",e&&(e.style.transform="rotate(0deg)")):(t.style.height=t.scrollHeight+"px",e&&(e.style.transform="rotate(180deg)")))})})}),document.querySelectorAll("input, textarea, select").forEach(t=>{t.addEventListener("focus",function(){if(window.innerWidth<992){let t=getComputedStyle(this).fontSize;this.dataset.originalSize=t,this.style.fontSize="16px",setTimeout(()=>{this.style.fontSize=t})}})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.getElementById("date-picker");t&&(t.setAttribute("autocomplete","off"),t.setAttribute("readonly","readonly"),t.value=""),flatpickr("#date-picker",{enableTime:!0,time_24hr:!0,locale:"fr",minDate:"today",disableMobile:!0,altInput:!0,altFormat:"d/m/Y - H\\hi",dateFormat:"Y-m-d H:i",allowInput:!1,clickOpens:!0})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){new class t{constructor(t){if(this.formWrapper=$(t),!this.formWrapper.length)return;this.form=this.formWrapper.find("form").length?this.formWrapper.find("form").eq(0):this.formWrapper,this.hasSubmitted=!1,this.validator=new class t{constructor(){this.borderError="1px solid #ff0000",this.shadowError="0 0 0 2px rgba(255, 0, 0, 0.1)",this.borderSuccess="1px solid #008000",this.shadowSuccess="0 0 0 2px rgba(0, 128, 0, 0.1)"}getIcon(t,e){let r=$(t),a=r.closest('.price_form-input-wrapper, .price_form-input-wrap, [data-contact-field="radio-wrapper"]');if(a.length>0)return a.find(`[data-contact-field="${e}"]`);{let o=r.siblings(`[data-contact-field="${e}"]`);return o.length?o:r.parent().find(`[data-contact-field="${e}"]`)}}getVisibleDateElement(t){let e=$(t).closest(".price_form-input-wrap");if(!e.length)return t;let r=e.find('input[type="text"].is-date').get(0);return r||t}cleanError(t){let e=window.getComputedStyle(t).borderColor;("rgb(255, 0, 0)"===e||"#ff0000"===e)&&(t.style.setProperty("border","","important"),t.style.setProperty("box-shadow","","important"),t.style.borderRadius="",this.getIcon(t,"error").hide())}applySuccessBorder(t){t.style.setProperty("border",this.borderSuccess,"important")}applySuccessShadow(t){t.style.setProperty("box-shadow",this.shadowSuccess,"important")}removeShadow(t){t.style.setProperty("box-shadow","","important")}showSuccess(t){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),this.cleanError(t),this.applySuccessBorder(t),t.style.borderRadius="",this.getIcon(t,"validate").show()}hideSuccess(t){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),t.style.setProperty("border","","important"),this.removeShadow(t),this.getIcon(t,"validate").hide()}showError(t){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),this.hideSuccess(t),t.style.setProperty("border",this.borderError,"important"),t.style.setProperty("box-shadow",this.shadowError,"important"),t.style.borderRadius="",this.getIcon(t,"error").show()}showRadioError(t){this.hideSuccess(t),t.style.setProperty("border",this.borderError,"important"),t.style.setProperty("box-shadow",this.shadowError,"important"),this.getIcon(t,"error").show()}},this.popup=new class t{constructor(){this.popup=null,this.bar=null,this.injectPopupHTML()}isInViewport(){if(!this.popup)return!1;let t=this.popup.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,a=t.right>0&&t.left<e,o=t.bottom>0&&t.top<r;return a&&o}forceHide(){this.popup&&this.bar&&(this.popup.classList.remove("show"),this.popup.classList.add("hide"),this.bar.style.width="0%")}injectPopupHTML(){let t=document.createElement("style");t.textContent=`
        #contact-popup {
          position: fixed;
          top: 24px;
          right: 24px;
          z-index: 9999;
          opacity: 0;
          transform: translateX(400px);
          transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                      transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #contact-popup.show {
          opacity: 1;
          transform: translateX(0);
        }
        
        #contact-popup.hide {
          opacity: 0;
          transform: translateX(400px);
          transition: opacity 0.4s cubic-bezier(0.4, 0, 1, 1), 
                      transform 0.4s cubic-bezier(0.4, 0, 1, 1);
        }
        
        #contact-popup-inner {
          background: #ffffff;
          padding: 16px 20px;
          border-radius: 12px;
          min-width: 320px;
          max-width: 400px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);
          border: 1px solid rgba(0, 128, 0, 0.2);
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        #contact-popup-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 8px;
        }
        
        #contact-popup-icon {
          width: 24px;
          height: 24px;
          background: #22c55e;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
          animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
        }
        
        @keyframes scaleIn {
          from {
            transform: scale(0);
          }
          to {
            transform: scale(1);
          }
        }
        
        #contact-popup-icon svg {
          width: 14px;
          height: 14px;
          fill: white;
        }
        
        #contact-popup-title {
          font-size: 15px;
          font-weight: 600;
          color: #1a1a1a;
          margin: 0;
        }
        
        #contact-popup-text {
          font-size: 13px;
          color: #6b7280;
          margin: 0 0 12px 0;
          line-height: 1.5;
        }
        
        #contact-popup-track {
          width: 100%;
          height: 4px;
          border-radius: 999px;
          background: #f3f4f6;
          overflow: hidden;
        }
        
        #contact-popup-bar {
          width: 0%;
          height: 100%;
          background: linear-gradient(90deg, #22c55e, #16a34a);
          transition: width 5s cubic-bezier(0.4, 0, 0.2, 1);
          border-radius: 999px;
        }
        
        @media (prefers-reduced-motion: reduce) {
          #contact-popup {
            transition: none;
          }
          #contact-popup-icon {
            animation: none;
          }
          #contact-popup-bar {
            transition: width 0.01s linear !important;
          }
        }
        
        @media (max-width: 768px) {
          #contact-popup {
            top: 16px;
            right: 16px;
            left: 16px;
          }
          #contact-popup-inner {
            min-width: auto;
            width: 100%;
          }
        }
      `,document.head.appendChild(t);let e=document.createElement("div");e.id="contact-popup",e.innerHTML=`
        <div id="contact-popup-inner">
          <div id="contact-popup-header">
            <div id="contact-popup-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
              </svg>
            </div>
            <div id="contact-popup-title">Demande envoy\xe9e avec succ\xe8s</div>
          </div>
          <div id="contact-popup-text">Nous vous recontacterons dans les plus brefs d\xe9lais.</div>
          <div id="contact-popup-track">
            <div id="contact-popup-bar"></div>
          </div>
        </div>
      `,document.body.appendChild(e),this.popup=document.getElementById("contact-popup"),this.bar=document.getElementById("contact-popup-bar")}show(){this.popup&&this.bar&&(this.bar.style.width="0%",this.popup.classList.remove("hide"),this.popup.classList.add("show"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.bar.style.width="100%"})}),setTimeout(()=>{if(!this.isInViewport()){this.forceHide();return}this.popup.classList.remove("show"),this.popup.classList.add("hide"),setTimeout(()=>{this.popup.classList.remove("hide"),this.bar.style.width="0%"},500)},5e3))}},this.emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,this.phoneRegex=/^7 [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$/,this.init()}init(){this.formWrapper.attr("novalidate","novalidate"),this.formWrapper.find('[data-contact-field="error"]').hide(),this.formWrapper.find('[data-contact-field="validate"]').hide(),this.formWrapper.find('[data-contact-field="time-wrapper"]').hide(),this.bindEvents()}bindEvents(){this.formWrapper.on("click",t=>this.handleGlobalClick(t)),this.formWrapper.on("click touchstart",".form-contact_radio-wrapper",t=>this.handleRadioWrapperClick(t)),this.formWrapper.on("change",'input[type="radio"][data-contact-field="radio"]',t=>this.handleRadioChange(t)),this.formWrapper.on("focusin",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',t=>this.handleFocusIn(t)),this.formWrapper.on("focusout",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',t=>this.handleFocusOut(t)),this.formWrapper.on("input",'[data-contact-field="postal"]',t=>this.handlePostalInput(t)),this.formWrapper.on("input",'[data-contact-field="phone"]',t=>this.handlePhoneInput(t)),this.formWrapper.on("input change",'[data-contact-field="date"]',t=>this.handleDateInput(t)),this.formWrapper.on("input",'[data-contact-field="text"]:not([data-contact-field="phone"]):not([data-contact-field="postal"]):not([data-contact-field="date"])',t=>this.handleTextInput(t)),this.formWrapper.on("click",'input[type="submit"], button[type="submit"]',t=>this.handleSubmit(t)),$(document).on("click",'[data-form-contact="open"]',()=>this.handleReopen())}handleGlobalClick(t){$(t.target).closest('input[type="submit"], button[type="submit"]').length||this.removeAllErrorStyles()}removeAllErrorStyles(){this.formWrapper.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"], [data-contact-field="radio-wrapper"]').each((t,e)=>{let r=e;$(e).is('[data-contact-field="date"]')&&(r=this.validator.getVisibleDateElement(e)),this.validator.cleanError(r)})}handleRadioWrapperClick(t){let e=$(t.currentTarget).find('input[type="radio"][data-contact-field="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}handleRadioChange(t){let e=t.target.name,r=this.formWrapper.find(`input[type="radio"][data-contact-field="radio"][name="${e}"]`);if(r.each((t,e)=>{let r=$(e).closest('[data-contact-field="radio-wrapper"]')[0],a=r||e;e.checked?(this.validator.cleanError(a),this.validator.getIcon(e,"error").hide(),this.validator.getIcon(e,"validate").show()):(a.style.setProperty("border","","important"),a.style.setProperty("box-shadow","","important"),a.style.borderRadius="",this.validator.getIcon(e,"validate").hide())}),"contact-radio"===e){let a=this.formWrapper.find('[data-contact-field="time-wrapper"]'),o=this.formWrapper.find('[data-contact-field="date"]'),i=this.formWrapper.find("#radio-opt-2")[0];i&&i.checked?(a.slideDown(300),o.attr("required","required")):(a.slideUp(300),o.removeAttr("required"),o.each((t,e)=>{this.validator.hideSuccess(e),this.validator.cleanError(this.validator.getVisibleDateElement(e))}))}}handleFocusIn(t){let e=t.target;$(e).is('[data-contact-field="date"]')&&(e=this.validator.getVisibleDateElement(e)),this.validator.cleanError(e),this.validator.applySuccessShadow(e)}handleFocusOut(t){let e=t.target;$(e).is('[data-contact-field="date"]')&&(e=this.validator.getVisibleDateElement(e)),this.validator.removeShadow(e)}handlePostalInput(t){let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?this.validator.showSuccess(t.target):this.validator.hideSuccess(t.target)}handlePhoneInput(t){let e=t.target.value.replace(/\D/g,"").substring(0,9);e.length>0&&"7"!==e[0]&&(e="7"+e.substring(1));let r="";e.length>0&&(r+=e.substring(0,1)),e.length>1&&(r+=" "+e.substring(1,3)),e.length>3&&(r+=" "+e.substring(3,5)),e.length>5&&(r+=" "+e.substring(5,7)),e.length>7&&(r+=" "+e.substring(7,9)),t.target.value=r,this.phoneRegex.test(r)?this.validator.showSuccess(t.target):this.validator.hideSuccess(t.target)}handleDateInput(t){""!==t.target.value.trim()?this.validator.showSuccess(t.target):this.validator.hideSuccess(t.target)}handleTextInput(t){t.target.value.trim().length>1?this.validator.showSuccess(t.target):this.validator.hideSuccess(t.target)}validateInputs(){let t=0;return this.formWrapper.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]').each((e,r)=>{if($(r).is('[data-contact-field="date"]')&&!$(r).attr("required"))return;let a=r,o=!0,i=r.value.trim();i||(o=!1),o&&$(r).is('[data-contact-field="postal"]')&&5!==i.length&&(o=!1),o&&$(r).is('[data-contact-field="phone"]')&&!this.phoneRegex.test(i)&&(o=!1),o?this.validator.showSuccess(a):(this.validator.showError(a),t++)}),t}validateRadios(){let t=0,e=this.formWrapper.find('input[type="radio"][data-contact-field="radio"]:visible'),r={};for(let a in e.each((t,e)=>{let a=e.name;r[a]||(r[a]=[]),r[a].push(e)}),r){let o=r[a],i=o.some(t=>t.checked);i?o.forEach(t=>{let e=$(t).closest('[data-contact-field="radio-wrapper"]')[0]||t;this.validator.cleanError(e)}):(o.forEach(t=>{let e=$(t).closest('[data-contact-field="radio-wrapper"]')[0]||t;this.validator.showRadioError(e)}),t++)}return t}validateAllFields(){let t=0;return t+=this.validateInputs(),t+=this.validateRadios()}async submitToN8n(){let t=this.validateAllFields();if(t>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");let e=this.form[0],r=new FormData(e);console.log("\uD83D\uDCE4 POST contact vers n8n");try{let a=await fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:r});console.log("✅ R\xe9ponse n8n (contact) status:",a.status),a.ok?this.handleSuccessfulSubmit():this.showErrorMessage()}catch(o){console.error("❌ Erreur n8n (contact):",o),this.showErrorMessage()}}handleSuccessfulSubmit(){this.hasSubmitted=!0,window.unlockScrollContact&&window.unlockScrollContact(),document.body.style.setProperty("overflow","visible","important"),document.querySelectorAll(".form-contact_form").forEach(t=>{t.style.setProperty("display","block","important")}),document.querySelectorAll(".form-contact_success").forEach(t=>{t.style.setProperty("display","none","important")}),document.querySelectorAll(".form-contact_error").forEach(t=>{t.style.setProperty("display","none","important")}),document.querySelectorAll('[data-form-contact="page"]').forEach(t=>{t.style.setProperty("display","none","important")});let t=this.form[0];t&&"function"==typeof t.reset&&t.reset(),this.formWrapper.find('[data-contact-field="time-wrapper"]').hide(),this.formWrapper.find('[data-contact-field="date"]').removeAttr("required"),this.formWrapper.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"], [data-contact-field="radio-wrapper"]').each((t,e)=>{let r=e;$(e).is('[data-contact-field="date"]')&&(r=this.validator.getVisibleDateElement(e)),r.style.setProperty("border","","important"),r.style.setProperty("box-shadow","","important"),r.style.borderRadius="",this.validator.getIcon(r,"error").hide(),this.validator.getIcon(r,"validate").hide()}),this.popup.show()}showErrorMessage(){$(".form-contact_error").css("display","block"),$(".form-contact_success").hide()}handleSubmit(t){t.preventDefault(),t.stopPropagation(),this.submitToN8n()}handleReopen(){this.hasSubmitted&&($(".form-contact_success").hide(),$(".form-contact_error").hide(),$(".form-contact_form").css("display","block"))}}("#form-contact")}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(function t(){let e=document.querySelector("#form-contact-phone");if(!e){console.error("Input #telephone introuvable !");return}if(window.intlTelInput){let r=window.intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"auto",preferredCountries:["fr","be","ch"],fixDropdownWidth:!0,geoIpLookup(t){fetch("https://ipapi.co/json").then(t=>t.json()).then(e=>t(e.country_code)).catch(()=>t("fr"))}}),a=e.closest("form");a.addEventListener("submit",function(){let t="";t=window.intlTelInputUtils?r.getNumber(window.intlTelInputUtils.numberFormat.INTERNATIONAL):r.getNumber(),e.style.color="transparent",e.value=t})}else console.error("La librairie intlTelInput n'est pas encore charg\xe9e.")},500)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector(".faq_tabs.w-tabs");if(!t)return;let e=t.querySelector(".w-tab-menu"),r=t.querySelector(".w-tab-content");if(!e||!r)return;let a=e.querySelectorAll(".w-tab-link, .faq_tab-link"),o=r.querySelectorAll(".w-tab-pane"),i=r.querySelectorAll(".faq_tab-pane .faq_tabs-menu-wrapper[data-tabs]");if(!a.length||!o.length||!i.length)return;function n(t,e){t&&t.style.setProperty("color",e,"important")}function l(t){t&&t.style.removeProperty("color")}function s(t,e){n(t,e);let r=t.querySelectorAll(".faq_tab-text");r.forEach(t=>n(t,e))}function c(t){l(t);let e=t.querySelectorAll(".faq_tab-text");e.forEach(t=>l(t))}function d(t){a.forEach(t=>{t.classList.remove("w--current"),t.setAttribute("aria-selected","false"),t.removeAttribute("tabindex"),c(t)}),o.forEach(t=>{t.classList.remove("w--tab-active"),t.setAttribute("hidden","true")}),i.forEach(t=>{t.querySelectorAll(".faq_tab-link").forEach(t=>{t.classList.remove("w--current"),c(t)})});let e=a[t],r=o[t];if(e&&(e.classList.add("w--current"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),s(e,"#ffffff")),r&&(r.classList.add("w--tab-active"),r.removeAttribute("hidden")),r){let n=r.querySelector(".faq_tabs-menu-wrapper[data-tabs]");if(n){let l=n.querySelectorAll(".faq_tab-link");l[t]&&(l[t].classList.add("w--current"),s(l[t],"#ffffff"))}}}let p=0;a.forEach((t,e)=>{(t.classList.contains("w--current")||"true"===t.getAttribute("aria-selected"))&&(p=e)}),d(p),a.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),d(e)})}),i.forEach(t=>{let e=t.querySelectorAll(".faq_tab-link");e.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),d(e)})})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector('[data-form-contact="page"]'),e=document.querySelectorAll('[data-form-contact="open"]'),r=document.querySelectorAll('[data-form-contact="close"]'),a=document.querySelectorAll('[data-form-contact="page"] [data-btn]'),o=document.body;if(!t||!e.length)return;t.style.transition="opacity 400ms ease",t.style.opacity="0",t.style.display="none";let i=!1,n=t=>{i&&t.preventDefault()},l=t=>{if(!i)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()},s=()=>{i=!0,o.addEventListener("wheel",n,{passive:!1}),o.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("keydown",l,{passive:!1})},c=()=>{i=!1,o.removeEventListener("wheel",n),o.removeEventListener("touchmove",n),window.removeEventListener("keydown",l)};window.unlockScrollContact=c;let d=()=>{s(),t.style.display="block",requestAnimationFrame(()=>{t.style.opacity="1"})},p=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none",c()},400)};document.addEventListener("click",e=>{if("block"!==t.style.display||e.target.closest(".flatpickr-calendar")||e.target.classList&&e.target.classList.contains("price_form-input")&&e.target.classList.contains("w-input"))return;let r=e.target.closest(".form-contact_component"),a=e.target.closest(".form-contact_content");if(r&&!a){p();return}let o=null!==e.target.closest('[data-form-contact="page"]');o||p()}),e.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),d()})}),r.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),p()})}),a.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),p()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){gsap.registerPlugin(ScrollTrigger,SplitText),gsap.context(()=>{document.querySelectorAll('[data-heading=""]').forEach(t=>{if("true"===t.dataset.splitInit)return;t.dataset.splitInit="true";let e=t.querySelectorAll(".main-span");if(!t.textContent.trim())return;e.forEach(t=>{let e=t.previousSibling;e&&3===e.nodeType&&/\s$/.test(e.textContent)||t.insertAdjacentText("beforebegin"," ")});let r=t.querySelector("[data-split-word]"),a,o;if(!(o=r?Array.from(t.querySelectorAll('[data-split-word="true"]')):(a=new SplitText(t,{type:"words",wordsClass:"split-word-wrapper",elementClass:!1,ignore:".main-span",position:"relative"})).words.map(t=>{let e=window.getComputedStyle(t.parentNode);return t.dataset.splitWord="true",t.style.display="inline-block",t.style.lineHeight=e.lineHeight,t.style.textDecoration=e.textDecoration,t.style.fontSize=e.fontSize,t.style.fontWeight=e.fontWeight,t.style.color=e.color,t})).length)return;gsap.set(o,{filter:"blur(20px)",y:40,opacity:0,willChange:"filter, y, opacity"}),e.forEach(t=>{gsap.set(t,{filter:"blur(20px)",y:40,opacity:0,"--bgY":"100%"})});let i=new IntersectionObserver(r=>{r.forEach(r=>{if(r.isIntersecting){let a=gsap.timeline();a.to(o,{filter:"blur(0px)",y:0,opacity:1,duration:.9,stagger:.04,ease:"power3.out"}),e.forEach((t,e)=>{a.to(t,{filter:"blur(0px)",y:0,opacity:1,"--bgY":"0%",duration:.6,ease:"power3.out"},"-=0.8")}),i.unobserve(t)}})},{threshold:.3,rootMargin:"0px 0px -10% 0px"});i.observe(t)})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){var t=document.querySelector('[data-navbar=""]'),e=document.querySelector('[data-hero=""]'),r=document.querySelector('[data-navbar-menu-btn=""]'),a=document.querySelector(".navbar_menu-button-inner"),o=t?t.querySelectorAll('[data-link-line="line"]'):[],i=r?r.getAttribute("aria-controls"):null,n=i?document.getElementById(i):null,l=!1;if(!t||!r)return;var s=t.hasAttribute("data-navbar-legal");let c=!1,d=t=>{c&&t.preventDefault()},p=t=>{if(!c)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()};function u(t){o.forEach(function(e){e.style.backgroundColor=t})}function h(t){t?document.body.style.overflowX="hidden":document.body.style.overflowX=""}function f(){s&&(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="var(--_variables-collection---text-color--text-primary)",u("#0a0a0a"))}function b(){if(s){f();return}if(!l){var r=window.scrollY,a=window.innerWidth<768;if(!e){r>0?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=a?"black":"var(--_variables-collection---text-color--text-primary)",u("#0a0a0a")):y();return}var o,i=r,n=t.getBoundingClientRect(),c=e.getBoundingClientRect();n.bottom+i>c.bottom+i?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=a?"black":"var(--_variables-collection---text-color--text-primary)",u("#0a0a0a")):r>0?(t.style.backgroundColor="rgba(0, 0, 0, 0.25)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="",u("")):y()}}function y(){if(s){f();return}t.style.backgroundColor="transparent",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="",u("")}function g(){l=!0,t.style.backgroundColor="#F2F2F2",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="black",a&&(a.style.color="black"),u("#0a0a0a"),h(!0),c=!0,window.addEventListener("wheel",d,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("keydown",p,{passive:!1})}function m(){l=!1,a&&(a.style.color=""),h(!1),c=!1,window.removeEventListener("wheel",d),window.removeEventListener("touchmove",d),window.removeEventListener("keydown",p),s?f():b()}if(r&&n){var v=new MutationObserver(function(){r.classList.contains("w--open")?g():m()}),w=new MutationObserver(function(t){t.forEach(function(t){"style"===t.attributeName&&"none"===n.style.display&&m()})});v.observe(r,{attributes:!0,attributeFilter:["class"]}),w.observe(n,{attributes:!0,attributeFilter:["style"]}),r.classList.contains("w--open")?g():s&&f()}window.addEventListener("scroll",b),window.addEventListener("resize",b),b()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t={"slider-1":{pricePerM2First100:8.9,pricePerM2After100:6.9,minValue:0},"slider-2":{pricePerM2:6.9,minValue:0},"slider-3":{pricePerM2:9.9,minValue:0},"slider-4":{pricePerM2:3.9,minValue:0}};function e(e,r){let a=t[e];if(!a||!a.pricePerM2||0===r)return 0;let o=Math.max(a.minValue,r);return o*a.pricePerM2}function r(){let e=document.querySelector('input[data-range="slider-1"]'),r=parseFloat(e.value)||0;o("value_toiture",r);let n=document.querySelector('input[data-radio="slops"]:checked');if(n){let l="";switch(n.value){case"pente_faible":l="Faible";break;case"pente_moyenne":l="Moyenne";break;case"pente_forte":l="Forte"}document.querySelectorAll('[data-radio="text"]').forEach(t=>{t.textContent=l})}let s=function t(){let e=document.querySelector('input[data-radio="slops"]:checked');if(!e)return 1;switch(e.value){case"pente_faible":return 1.155;case"pente_moyenne":return 1.414;case"pente_forte":return 2;default:return 1}}(),c=s.toFixed(3).replace(".",",");document.querySelectorAll('[data-radio="coef"]').forEach(t=>{t.textContent=`${c}`});let d=r*s,p=d.toFixed(1).replace(".",",");document.querySelectorAll('[data-radio="slops-text"]').forEach(t=>{t.textContent=p});let u=function e(r){let a=t["slider-1"];if(r<=100)return r*a.pricePerM2First100;{let o=100*a.pricePerM2First100,i=(r-100)*a.pricePerM2After100;return o+i}}(d),h=e.closest('[data-range="wrapper"]');if(h){let f=h.querySelector('[data-range="price"]');f&&(f.textContent=a(u))}o("value_toiture_result",a(u));let b=0,y=0,g=0,m=document.querySelector('input[data-range="slider-2"]');if(m){let v=parseFloat(m.value)||0;b=v*t["slider-2"].pricePerM2,o("value_facades_demoussage",v),o("value_surface_demoussage",a(b)),i(m,b)}let w=document.querySelector('input[data-range="slider-3"]');if(w){let E=parseFloat(w.value)||0;y=E*t["slider-3"].pricePerM2,o("value_facades_hydrofuge",E),o("value_surface_protection_hydrofuge",a(y)),i(w,y)}let S=document.querySelector('input[data-range="slider-4"]');if(S){let _=parseFloat(S.value)||0;g=_*t["slider-4"].pricePerM2,o("value_gouttieres",_),o("value_gouttieres_result",a(g)),i(S,g)}let x=b+y;o("value_facades_result",a(x));let k=u+b+y+g,C=!function t(){let e=document.querySelector('input[data-toggle="checkbox"]');return!!e&&e.checked}()?0:150,W=k-C;document.querySelectorAll('[data-range="sum"]').forEach(t=>{t.textContent=a(W)})}function a(t){return t.toFixed(2).replace(".",",")+"€"}function o(t,e){document.querySelectorAll(`[data-range="${t}"]`).forEach(t=>{"INPUT"===t.tagName?t.value=e:t.textContent=e})}function i(t,e){let r=t.closest('[data-range="wrapper"]');if(r){let o=r.querySelector('[data-range="price"]');o&&(o.textContent=a(e))}}let n=document.querySelectorAll('input[type="range"]');n.forEach(t=>{t.addEventListener("input",r),t.addEventListener("change",r)});let l=document.querySelectorAll('input[data-radio="slops"]');l.forEach(t=>{t.addEventListener("change",r)});let s=document.querySelector('input[data-toggle="checkbox"]');s&&s.addEventListener("change",r),r()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){class t{static BORDER_ERROR="1px solid #ff0000";static SHADOW_ERROR="0 0 0 2px rgba(255, 0, 0, 0.1)";static BORDER_SUCCESS="1px solid #008000";static SHADOW_SUCCESS="0 0 0 2px rgba(0, 128, 0, 0.1)";static EMAIL_REGEX=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;static PHONE_REGEX=/^7 [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$/;static PRICE_FIELDS=["prix_surface_nettoyage_toiture","prix_surface_demoussage","prix_surface_protection_hydrofuge","prix_voulume_nettoyage_gouttieres"]}class e{constructor(){this.prixTTCInput=$('input[name="prix_ttc"][data-range="sum"]')}updatePrixTTC(){if(0===this.prixTTCInput.length)return;let e=0;t.PRICE_FIELDS.forEach(t=>{let r=$('input[name="'+t+'"]');if(r.length>0){let a=r.val().trim(),o=a.replace(/[€\s]/g,"").replace(",","."),i=parseFloat(o)||0;e+=i}});let r=e.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})+"€";this.prixTTCInput.val(r).attr("value",r),console.log("\uD83D\uDCB0 Prix TTC mis \xe0 jour:",r)}}class r{static getRelatedIcon(t,e){let r=$(t).closest(".price_form-input-wrapper");if(r.length>0)return r.find('[data-field="'+e+'"]');{let a=$(t).siblings('[data-field="'+e+'"]');return a.length?a:$(t).parent().find('[data-field="'+e+'"]')}}}class a{static cleanErrorStyle(t){("rgb(255, 0, 0)"===t.style.borderColor||"#ff0000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow="",r.getRelatedIcon(t,"error").hide())}static showSuccess(e,a=!1){this.cleanErrorStyle(e),e.style.border=t.BORDER_SUCCESS,a?e.style.boxShadow=t.SHADOW_SUCCESS:e.style.boxShadow="",r.getRelatedIcon(e,"validate").show()}static showError(e,a=!1){this.cleanErrorStyle(e),e.style.border=t.BORDER_ERROR,a?e.style.boxShadow=t.SHADOW_ERROR:e.style.boxShadow="",r.getRelatedIcon(e,"error").show()}static hideSuccess(t){("rgb(0, 128, 0)"===t.style.borderColor||"#008000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow=""),r.getRelatedIcon(t,"validate").hide()}static removeAllErrorStyles(){$('[data-field="input"]').each(function(){a.cleanErrorStyle(this)}),$("[data-radio]").each(function(){a.cleanErrorStyle(this)})}}class o{static validateInput(e){let r=$(e),a=e.value.trim(),o=!0;return a?r.is("[data-postal]")&&5!==a.length?o=!1:r.is("[data-phone]")&&!t.PHONE_REGEX.test(a)?o=!1:(r.is("[data-mail]")||"email"===e.type)&&!t.EMAIL_REGEX.test(a)&&(o=!1):o=!1,r.is('[data-range="sum"]')&&(o=!0),o}static validateRadioGroups(e){let o=$("[data-radio]:visible",e),i={},n=0;for(let l in o.each(function(){let t=$(this).find('input[type="radio"]')[0];t&&(i[t.name]||(i[t.name]=[]),i[t.name].push(this))}),i){let s=$('input[name="'+l+'"]:checked',e).length>0,c=i[l];s?c.forEach(t=>{a.cleanErrorStyle(t)}):(c.forEach(e=>{e.style.border=t.BORDER_ERROR,e.style.boxShadow=t.SHADOW_ERROR,r.getRelatedIcon(e,"error").show()}),n++)}return n}static validateVisibleFields(){let t=0;return $('[data-field="input"]:visible:not([data-range="sum"])').each(function(){let e=o.validateInput(this);e?(a.cleanErrorStyle(this),a.showSuccess(this,!1)):(a.hideSuccess(this),a.showError(this,!1),t++)}),t+=o.validateRadioGroups(document)}static validateContactFields(t){let e=0;return $('[data-field="input"]:visible',t).each(function(){let t=o.validateInput(this);t?(a.cleanErrorStyle(this),a.showSuccess(this,!1)):(a.hideSuccess(this),a.showError(this,!1),e++)}),e+=o.validateRadioGroups(t)}}class i{static formatPostal(t){let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?a.showSuccess(t.target,!1):a.hideSuccess(t.target)}static formatPhone(e){let r=e.target.value.replace(/\D/g,"").substring(0,9);r.length>0&&"7"!==r[0]&&(r="7"+r.substring(1));let o="";r.length>0&&(o+=r.substring(0,1)),r.length>1&&(o+=" "+r.substring(1,3)),r.length>3&&(o+=" "+r.substring(3,5)),r.length>5&&(o+=" "+r.substring(5,7)),r.length>7&&(o+=" "+r.substring(7,9)),e.target.value=o,t.PHONE_REGEX.test(o)?a.showSuccess(e.target,!1):a.hideSuccess(e.target)}static formatEmail(e){t.EMAIL_REGEX.test(e.target.value)?a.showSuccess(e.target,!1):a.hideSuccess(e.target)}static formatGeneric(t){t.value.trim().length>1?a.showSuccess(t,!1):a.hideSuccess(t)}}class n{constructor(t){this.priceCalculator=t,this.setupEventListeners()}setupEventListeners(){$(document).on("click touchstart","[data-radio]",this.handleClick.bind(this)),$(document).on("change",'input[type="radio"]',this.handleChange.bind(this))}handleClick(t){let e=$(t.currentTarget).find('input[type="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}handleChange(t){let e=t.target.name,o=$("[data-radio]").filter(function(){let t=$(this).find('input[type="radio"]')[0];return t&&t.name===e});o.each(function(){let t=$(this).find('input[type="radio"]')[0];t&&(t.checked?(a.cleanErrorStyle(this),a.showSuccess(this,!1)):(("rgb(0, 128, 0)"===this.style.borderColor||"#008000"===this.style.borderColor)&&(this.style.border="",this.style.boxShadow=""),r.getRelatedIcon(this,"validate").hide()))}),this.priceCalculator.updatePrixTTC()}}class l{constructor(t){this.priceCalculator=t,this.setupEventListeners()}setupEventListeners(){$(document).on("focusin",'[data-field="input"]:not([data-range="sum"])',this.handleFocusIn.bind(this)),$(document).on("focusout",'[data-field="input"]',this.handleFocusOut.bind(this)),$(document).on("input","[data-postal]",i.formatPostal),$(document).on("input","[data-phone]",i.formatPhone),$(document).on("input","[data-mail]",i.formatEmail),$(document).on("input change",'input[name^="prix_"]:not([name="prix_ttc"])',this.handlePriceChange.bind(this)),$(document).on("input",'[data-field="input"]:not([data-postal]):not([data-phone]):not([data-mail]):not([data-range="sum"])',this.handleGenericInput.bind(this))}handleFocusIn(e){let r=e.target.value.trim(),o=!0;r?$(e.target).is("[data-postal]")&&5!==r.length?o=!1:$(e.target).is("[data-phone]")&&!t.PHONE_REGEX.test(r)?o=!1:$(e.target).is("[data-mail]")&&!t.EMAIL_REGEX.test(r)?o=!1:r.length<=1&&(o=!1):o=!1,o&&a.showSuccess(e.target,!0)}handleFocusOut(t){"rgb(0, 128, 0)"===t.target.style.borderColor||"#008000"===t.target.style.borderColor?t.target.style.boxShadow="":("rgb(255, 0, 0)"===t.target.style.borderColor||"#ff0000"===t.target.style.borderColor)&&(t.target.style.boxShadow="")}handlePriceChange(){this.priceCalculator.updatePrixTTC()}handleGenericInput(t){i.formatGeneric(t.target)}}class s{constructor(){this.step1=$('[data-form-steps="1"]'),this.step2=$('[data-form-steps="2"]'),this.setupEventListeners()}setupEventListeners(){$('[data-btn="form"]').click(this.handleNextStep.bind(this)),$('[data-form="return"]').click(this.handlePreviousStep.bind(this)),$(document).on("click",this.handleDocumentClick.bind(this))}handleNextStep(t){if(t.preventDefault(),t.stopPropagation(),this.step1.is(":visible")){let e=o.validateVisibleFields();0===e&&this.step1.animate({opacity:0},300,()=>{this.step1.hide(),this.step2.css({display:"grid",opacity:"0"}),this.step2.animate({opacity:1},300),767>$(window).width()&&$("html, body").animate({scrollTop:$("#etape-2").offset().top},500)})}}handlePreviousStep(t){t.preventDefault(),t.stopPropagation(),this.step2.animate({opacity:0},300,()=>{this.step2.hide(),this.step1.css({display:"grid",opacity:"0"}),this.step1.animate({opacity:1},300)})}handleDocumentClick(t){$(t.target).closest('[data-btn="form"], input[type="submit"], button[type="submit"]').length||a.removeAllErrorStyles()}}class c{constructor(t){this.priceCalculator=t,this.formContact=$("[data-form-content]"),this.formContactWrapper=this.formContact.closest(".w-form"),this.hasContactSubmitted=!1,this.setupEventListeners()}setupEventListeners(){this.formContactWrapper.on("click",'input[type="submit"], button[type="submit"]',this.handleSubmit.bind(this))}handleSubmit(t){t.preventDefault(),t.stopPropagation(),this.postToN8n()}postToN8n(){this.priceCalculator.updatePrixTTC();let t=o.validateContactFields(this.formContact);if(t>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");let e=this.formContact[0],r=new FormData(e);console.log("\uD83D\uDCE4 POST contact vers n8n"),fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:r}).then(t=>{console.log("✅ R\xe9ponse n8n (contact) status:",t.status),t.ok?(this.hasContactSubmitted=!0,this.formContact.hide(),$("[data-form-success]").css("display","block"),$("[data-form-error]").hide(),768>$(window).width()&&$("html, body").animate({scrollTop:$("[data-form-success]").offset().top-200},500)):($("[data-form-error]").css("display","block"),$("[data-form-success]").hide())}).catch(t=>{console.error("❌ Erreur n8n (contact):",t),$("[data-form-error]").css("display","block"),$("[data-form-success]").hide()})}}new class t{constructor(){this.init()}init(){this.setupForm(),this.priceCalculator=new e,this.radioHandler=new n(this.priceCalculator),this.inputHandler=new l(this.priceCalculator),this.formNavigation=new s,this.formSubmission=new c(this.priceCalculator),this.priceCalculator.updatePrixTTC()}setupForm(){let t=$("form"),e=$('[data-form-steps="1"]'),r=$('[data-form-steps="2"]');t.attr("novalidate","novalidate"),e.css("display","grid"),r.hide(),$('[data-field="error"]').hide(),$('[data-field="validate"]').hide()}}}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(function t(){let e=document.querySelector("#telephone");if(!e){console.error("Input #telephone introuvable !");return}if(window.intlTelInput){let r=window.intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"auto",preferredCountries:["fr","be","ch"],fixDropdownWidth:!0,geoIpLookup(t){fetch("https://ipapi.co/json").then(t=>t.json()).then(e=>t(e.country_code)).catch(()=>t("fr"))}}),a=e.closest("form");a.addEventListener("submit",function(){let t="";t=window.intlTelInputUtils?r.getNumber(window.intlTelInputUtils.numberFormat.INTERNATIONAL):r.getNumber(),e.style.color="transparent",e.value=t})}else console.error("La librairie intlTelInput n'est pas encore charg\xe9e.")},500)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll(".price_range-wrapper");t.forEach((t,e)=>{let r=t.querySelector('input[type="range"]'),a=t.querySelector('[data-range="text"]');function o(){let t=parseFloat(r.value),e=parseFloat(r.min||0),o=parseFloat(r.max||100),i=(t-e)/(o-e)*100;r.style.background=`linear-gradient(to right, #192BC2 ${i}%, #DFDFDF ${i}%)`,a&&(a.style.left=`calc(${i}% + ${10-.2*i}px)`)}r&&(r.addEventListener("input",o),window.addEventListener("resize",o),o())})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector("form");if(!t)return;let e=t.querySelector('input[name="action"]');e||((e=document.createElement("input")).type="hidden",e.name="action",t.appendChild(e));let r=t.querySelectorAll('input[type="submit"][data-action]');r.forEach(t=>{t.addEventListener("click",function(){e.value=this.dataset.action||"",console.log("\uD83D\uDDB1️ CLICK submit (actions.js) → action =",e.value)})});let a=document.querySelectorAll(".price_btn-wrapper");a.forEach(t=>{let e=t.querySelector("a.btn_component.is-form"),r=t.querySelector('input[type="submit"][data-action]');e&&r&&e.addEventListener("click",function(t){t.preventDefault(),console.log("\uD83D\uDDB1️ CLICK fakeBtn → click sur realSubmit",r),r.click()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll('[data-toggle="checkbox"]'),e=document.querySelector('[span][data-toggle="text"], [data-toggle="text"]');t.forEach(t=>{let r=t.closest(".price_checkbox-wrapper");if(!r)return;r.style.webkitTapHighlightColor="transparent";let a=r.querySelector('[data-toggle="circle"]'),o=r.querySelector('[data-toggle="background"]');function i(){let r=t.checked;e&&(e.textContent=r?"OUI":"NON"),r?(a.style.transform="translate(100%, -50%)",a.style.backgroundColor="#FFFFFF",o.style.backgroundColor="#192BC2"):(a.style.transform="translate(0%, -50%)",a.style.backgroundColor="#192BC2",o.style.backgroundColor="#FFFFFF")}a&&o&&(a.style.transition="transform 0.35s ease, background-color 0.35s ease",o.style.transition="background-color 0.35s ease",i(),t.addEventListener("change",i))})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(()=>{let t=document.querySelectorAll(".price_form-text-wrapper"),e=[];t.forEach(t=>{if(!t.hasAttribute("data-radio")){let r=t.querySelector('input[type="radio"]');r&&e.push(r)}}),e.forEach(t=>{t.addEventListener("change",function(){if(this.checked){let t=this.name,e=document.querySelectorAll(`input[name="${t}"]`);e.forEach(t=>{let e=t.closest(".price_form-text-wrapper");if(e&&!e.hasAttribute("data-radio")){e.style.backgroundColor="#ffffff",e.style.borderColor="transparent",e.style.color="#333333";let r=e.querySelectorAll("*");r.forEach(t=>t.style.color="")}});let r=this.closest(".price_form-text-wrapper");if(r){r.style.backgroundColor="rgba(25, 43, 194, 0.1)",r.style.borderColor="#192BC2",r.style.color="#192BC2";let a=r.querySelectorAll("*");a.forEach(t=>{t.style.color="#192BC2"})}}})})},100)}),function(){let t=document.querySelectorAll('input[type="range"]');if(0===t.length)return;let e=[];t.forEach(t=>{let r=function t(e){if(e.parentNode.classList.contains("ios-slider-wrapper"))return;let r=document.createElement("div");r.className="ios-slider-wrapper";let a=document.createElement("div");a.className="ios-slider-thumb",e.parentNode.insertBefore(r,e),r.appendChild(e),r.appendChild(a);let o=parseFloat(e.min)||0,i=parseFloat(e.max)||100;function n(){let t=parseFloat(e.value),r=e.getBoundingClientRect();if(0===r.width)return;let n=r.width-30;a.style.left=15+(t-o)/(i-o)*n+"px"}return a.addEventListener("touchstart",function(t){"none"!==getComputedStyle(a).display&&t.preventDefault()},{passive:!1}),a.addEventListener("touchmove",function(t){if("none"===getComputedStyle(a).display)return;t.preventDefault();let r=e.getBoundingClientRect(),l=t.touches[0].clientX,s=l-r.left,c=s/r.width;c<0&&(c=0),c>1&&(c=1);let d=o+c*(i-o);e.value=Math.round(d),n(),e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("change"))},{passive:!1}),e.addEventListener("input",n),requestAnimationFrame(n),n}(t);r&&e.push(r)}),window.addEventListener("resize",()=>{e.forEach(t=>t())}),window.addEventListener("load",()=>{e.forEach(t=>t())})}();