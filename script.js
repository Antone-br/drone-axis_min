window.Webflow=window.Webflow||[],window.Webflow.push(function(){document.querySelectorAll('[data-faq-dropdown=""]').forEach(e=>{e.addEventListener("click",function(){let e=this.querySelector('[data-faq-dropdown="answer"]'),t=this.querySelector('[data-faq-dropdown="arrow"]');e&&(e.style.height&&"0px"!==e.style.height?(e.style.height="0px",t&&(t.style.transform="rotate(0deg)")):(e.style.height=e.scrollHeight+"px",t&&(t.style.transform="rotate(180deg)")))})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(function e(){let t=document.querySelector("#telephone");if(!t){console.error("Input #telephone introuvable !");return}if(window.intlTelInput){let r=window.intlTelInput(t,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"auto",preferredCountries:["fr","be","ch"],geoIpLookup(e){fetch("https://ipapi.co/json").then(e=>e.json()).then(t=>e(t.country_code)).catch(()=>e("fr"))}}),l=t.closest("form");l.addEventListener("submit",function(){let e="";e=window.intlTelInputUtils?r.getNumber(window.intlTelInputUtils.numberFormat.INTERNATIONAL):r.getNumber(),t.style.color="transparent",t.value=e})}else console.error("La librairie intlTelInput n'est pas encore charg\xe9e.")},500)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){var e=document.querySelector('[data-navbar=""]'),t=document.querySelector('[data-hero=""]'),r=document.querySelector('[data-navbar-menu-btn=""]'),l=document.querySelector(".navbar_menu-button-inner"),o=document.querySelectorAll('[data-link-line="line"]'),n=r?r.getAttribute("aria-controls"):null,a=document.getElementById(n),i=!1;if(e){if(r&&a){var c=new MutationObserver(function(e){e.forEach(function(e){r.classList.contains("w--open")&&b()})}),u=new MutationObserver(function(e){e.forEach(function(e){"style"===e.attributeName&&"none"===a.style.display&&(i=!1,l&&(l.style.color=""),d())})});c.observe(r,{attributes:!0,attributeFilter:["class"]}),u.observe(a,{attributes:!0,attributeFilter:["style"]}),r.classList.contains("w--open")&&b()}window.addEventListener("scroll",d),window.addEventListener("resize",d),d()}function s(e){o.forEach(function(t){t.style.backgroundColor=e})}function d(){if(!i){var r=window.scrollY,l=window.innerWidth<768;if(!t){r>0?(e.style.backgroundColor="rgba(255, 255, 255, 0.5)",e.style.backdropFilter="blur(10px)",e.style.webkitBackdropFilter="blur(10px)",e.style.color=l?"black":"var(--_variables-collection---text-color--text-primary)",s("#0a0a0a")):f();return}var o,n=e.getBoundingClientRect(),a=t.getBoundingClientRect();n.bottom+r>a.bottom+r?(e.style.backgroundColor="rgba(255, 255, 255, 0.5)",e.style.backdropFilter="blur(10px)",e.style.webkitBackdropFilter="blur(10px)",l?e.style.color="black":e.style.color="var(--_variables-collection---text-color--text-primary)",s("#0a0a0a")):r>0?(e.style.backgroundColor="rgba(0, 0, 0, 0.25)",e.style.backdropFilter="blur(10px)",e.style.webkitBackdropFilter="blur(10px)",e.style.color="",s("")):f()}}function f(){e.style.backgroundColor="transparent",e.style.backdropFilter="none",e.style.webkitBackdropFilter="none",e.style.color="",s("")}function b(){i=!0,e.style.backgroundColor="#F2F2F2",e.style.backdropFilter="none",e.style.webkitBackdropFilter="none",e.style.color="black",l&&(l.style.color="black"),s("#0a0a0a")}}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){$('[data-form-steps="1"]').css("display","grid"),$('[data-form-steps="2"]').hide(),$('[data-btn="form"]').click(function(e){e.preventDefault();let t=$('[data-form-steps="1"]'),r=t.find("input, select, textarea"),l=!0;r.each(function(){if(!this.checkValidity())return l=!1,this.reportValidity(),!1}),l&&(t.hide(),$('[data-form-steps="2"]').css("display","grid"))})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let e=document.querySelectorAll("[data-phone]");e.forEach(function(e){e.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"").substring(0,9);t.length>0&&"7"!==t[0]&&(t="7"+t.substring(1));let r="";t.length>0&&(r+=t.substring(0,1)),t.length>1&&(r+=" "+t.substring(1,3)),t.length>3&&(r+=" "+t.substring(3,5)),t.length>5&&(r+=" "+t.substring(5,7)),t.length>7&&(r+=" "+t.substring(7,9)),e.target.value=r}),e.form&&e.form.addEventListener("submit",function(t){/^7 [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$/.test(e.value)||(t.preventDefault(),alert("Merci de saisir un num\xe9ro au format 7 12 34 56 78"))})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(()=>{let e=document.querySelectorAll(".price_form-radio"),t=document.querySelector('[data-radio="text"]');e.forEach(e=>{e.addEventListener("change",function(){if(this.checked){let e=document.querySelectorAll('[data-radio="pente"]');e.forEach(e=>{e.style.backgroundColor="",e.style.color=""});let r=this.closest('[data-radio="pente"]');r&&(r.style.backgroundColor="rgba(25, 43, 194, 0.1)",r.style.color="#192BC2"),t&&("pente_faible"===this.value?t.textContent="Faible":"pente_moyenne"===this.value?t.textContent="Moyenne":"pente_forte"===this.value&&(t.textContent="Forte"))}})})},100)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(()=>{let e=document.querySelectorAll(".price_form-radio");e.forEach(e=>{e.addEventListener("change",function(){if(this.checked){let e=document.querySelectorAll(".price_form-text-wrapper");e.forEach(e=>{e.style.backgroundColor="",e.style.color="";let t=e.querySelector('[data-radio="text-color"]');t&&(t.style.color="")});let t=this.closest(".price_form-text-wrapper");if(t){t.style.backgroundColor="rgba(25, 43, 194, 0.1)",t.style.color="#192BC2";let r=t.querySelector('[data-radio="text-color"]');r&&(r.style.color="#192BC2")}}})})},100)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let e=document.querySelectorAll('[data-range="wrapper"]');function t(e,t){let r=document.querySelectorAll(`[data-range="${e}"]`);r.forEach(e=>{"INPUT"===e.tagName?e.value=t:e.textContent=t})}function r(e){let t=document.querySelector(`[data-range="${e}"]`);if(!t)return 0;let r=t.closest('[data-range="wrapper"]');if(!r)return 0;let l=r.querySelector('[data-range="slider"]');if(!l)return 0;let o=parseFloat(l.value);return o<100&&(o=100),9.9*o}function l(){let l=r("value_toiture"),o=r("value_facades_demoussage"),n=r("value_facades_hydrofuge"),a=r("value_gouttieres");t("value_toiture_result",l.toFixed(2).replace(".",",")+"€"),t("value_facades_result",(o+n).toFixed(2).replace(".",",")+"€"),t("value_gouttieres_result",a.toFixed(2).replace(".",",")+"€");let i=0;e.forEach(e=>{let t=e.querySelector('[data-range="slider"]');if(t){let r=parseFloat(t.value);r<100&&(r=100),i+=9.9*r}}),t("sum",i.toFixed(2).replace(".",",")+"€")}e.forEach(e=>{let t=e.querySelector('[data-range="slider"]'),r=e.querySelector('[data-range^="value_"]'),o=e.querySelector('[data-range="price"]');t&&(t.addEventListener("input",function(){let e=parseFloat(t.value);e<100&&(e=100,t.value=100);let n=parseFloat(t.min||0),a=parseFloat(t.max||300),i=(e-n)/(a-n)*100;t.style.background=`linear-gradient(to right, #192BC2 ${i}%, #DFDFDF ${i}%)`,r&&!r.getAttribute("data-range").includes("result")&&(r.textContent=`${e}`),o&&(o.textContent=(9.9*e).toFixed(2).replace(".",",")+"€"),l()}),t.dispatchEvent(new Event("input")))});let o=document.getElementById("form");o&&o.addEventListener("submit",function(e){e.preventDefault();let t=o.parentNode,r=t.querySelector(".w-form-done"),n=t.querySelector(".w-form-fail"),a=o.querySelector('input[type="submit"]'),i=a.value;a.value="Calcul et envoi...",a.disabled=!0,l();let c=new FormData(o),u={};c.forEach((e,t)=>u[t]=e),fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(e=>{if(e.ok)o.style.display="none",r.style.display="block";else throw Error("Erreur n8n")}).catch(e=>{console.error("Erreur:",e),n.style.display="block",a.value=i,a.disabled=!1})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let e=document.querySelectorAll('[data-toggle="checkbox"]'),t=document.querySelector('[span][data-toggle="text"], [data-toggle="text"]');console.log("Global text element:",t),e.forEach((e,r)=>{let l=e.closest(".price_checkbox-wrapper");if(!l)return;let o=l.querySelector('[data-toggle="circle"]'),n=l.querySelector('[data-toggle="background"]');function a(){if(!t)return;let r=e.checked;t.textContent=r?"OUI":"NON",console.log("Texte mis \xe0 jour :",t.textContent)}o&&n&&(function t(){let r=e.checked;a(),gsap.set(o,{xPercent:r?100:0,yPercent:-50,backgroundColor:r?"#FFFFFF":"#192BC2"}),gsap.set(n,{backgroundColor:r?"#192BC2":"#FFFFFF"})}(),e.addEventListener("change",function t(){let r=e.checked;console.log("Change toggle ->",r),a(),gsap.to(o,{xPercent:r?100:0,yPercent:-50,backgroundColor:r?"#FFFFFF":"#192BC2",duration:.35,ease:"power2.out"}),gsap.to(n,{backgroundColor:r?"#192BC2":"#FFFFFF",duration:.35,ease:"power2.out"})}))})});